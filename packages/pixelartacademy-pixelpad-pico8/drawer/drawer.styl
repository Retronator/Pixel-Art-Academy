@import "{retronator:retronator-identity}/style/style.import"

.pixelartacademy-pixelpad-apps-pico-8-drawer
  position absolute
  width 320rem
  height 240rem
  left calc(50% - 160rem)
  top calc(50% - 120rem)

  &.opened
    .drawer
      top -50rem

  &.covered
    .table-top
    .drawer
      transition top 1s, opacity 1s 0.5s

    .table-top
      top -50rem
      opacity 0

    .drawer
      top 240rem
      opacity 0

    .selected-cartridge
      top 284rem !important
      transition all 0.5s

      .memory-card
        top -500rem !important
        transform scale(0.5)
        transition all 0.5s !important

  .table-top
  .drawer
    position absolute
    left -50rem
    width 420rem
    height 340rem
    transition top 1s, opacity 0.5s

  .table-top
    background-image image('/pixelartacademy/pixelpad/apps/pico8/tabletop.png')
    top -340rem

  .drawer
    background-image image('/pixelartacademy/pixelpad/apps/pico8/drawer.png')
    top -320rem

    .contents
      position absolute
      left 70rem
      top 80rem
      width 110rem
      padding 10rem
      color black

      .cartridges
        list-style none
        padding 0
        margin 0

        .cartridge
          position relative
          top 0
          width 47rem
          height 57rem
          margin-bottom 10rem
          transition all 0.2s
          transform-origin 0 0
          filter drop-shadow(-3rem 1rem 0 transparentify(atariOrange(2), atariOrange(4)))
          cursor pointer
          perspective 200rem

          &:hover
            top -1rem
            filter drop-shadow(-6rem 2rem 0 transparentify(atariOrange(2), atariOrange(4)))

          &.selected
            opacity 0
            transform scale(1.5)
            pointer-events none

            .case-top
              transform rotateY(-180deg)

          .case-top
          .case-bottom
            absolute-cover()
            opacity 0.6

          .case-bottom
            background-image image('/pixelartacademy/pixelpad/apps/pico8/case-bottom.png')

          .case-top
            background-image image('/pixelartacademy/pixelpad/apps/pico8/case-top.png')
            transform-origin 0 0
            transition all 0.2s

          .memory-card
            position absolute
            top 5rem
            left 5rem
            width 37rem
            height 47rem

            &::after
              content ''
              absolute-cover()
              background-image image('/pixelartacademy/pixelpad/apps/pico8/cartridge-overlay.png')
              mix-blend-mode overlay
              pointer-events none

            .image
              width 100%
              height 100%

      .no-cartridges
        position absolute
        top 18rem
        left 10rem
        width 79rem
        height 77rem
        padding 21rem 11rem 0 8rem
        background-image image('/pixelartacademy/pixelpad/apps/pico8/postit.png')

        .message
          transform rotate(-7deg)
          color atariMagenta(3)
          freehand()
          line-height 10rem
          text-align center

  .selected-cartridge
    position absolute
    top -6rem
    left -137rem
    width 399rem
    height 249rem
    opacity 0
    visibility hidden
    transform scale(0.8)
    perspective 600rem

    &.active
      opacity 1
      transition all 0.2s, left 1s
      visibility visible
      transform scale(1)

      .memory-card
        transition all 0.2s

      .case-top
        transform rotateY(0)

    &.panned-left
      left 60rem

      .case-bottom
      .memory-card
        cursor e-resize

      .case-top
        cursor default

        .share-area
          cursor text

          .link
            pointer-events auto

    &:not(.panned-left)
      .memory-card:hover
        top 20rem

    .case-bottom
    .case-top
      position absolute
      top 0
      height 100%
      opacity 0.85

    .case-bottom
      background-image image('/pixelartacademy/pixelpad/apps/pico8/case-big-bottom.png')
      width 202rem
      left 197rem

    .case-top
      width 197rem
      background-image image('/pixelartacademy/pixelpad/apps/pico8/case-big-top.png')
      transform rotateY(135deg)
      transform-origin 197rem 0
      transition all 0.2s
      // TODO: Show case top only for online projects.
      // cursor w-resize

      .share-area
        position absolute
        left 20rem
        top 187rem
        width 162rem
        height 45rem
        padding 2rem 35rem 0 10rem
        cursor w-resize
        text-align center
        adventure()
        color atariGray(7)
        text-shadow -1rem 1rem 0 atariGray(3)

        p
          margin 3rem 0

        .title
          text-transform uppercase

        .link
          pointer-events none

          a
            text-decoration none
            word-break break-word

    .memory-card
      position absolute
      left 216rem
      top 22rem
      width 160rem
      height 205rem
      cursor pointer

      &::after
        content ''
        absolute-cover()
        background-image image('/pixelartacademy/pixelpad/apps/pico8/cartridge-big-overlay.png')
        mix-blend-mode overlay
        pointer-events none

      .image
        width 100%
        height 100%
